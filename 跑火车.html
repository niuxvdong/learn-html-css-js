<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #div1 {
            width: 400px;
            height: 400px;
            position: relative;
        }
        #mydiv {
            width: 20px;
            height: 20px;
            background-color: red;
            /* 不加position,left不会生效 */
            position: absolute;
        }
        #div2{
            width: -100px;
            height: -100px;
            background-color: red;
        }
    </style>
</head>
<body>

    <div id="div1">
        <div id="mydiv"></div>
    </div>

    <!-- <div id="div2"></div> -->
    <p>太失败了，应该是四个方向一个圈来回循环，但是倒着的第三步和第四步没法实现方向问题。。。。先放下。。</p>
    <script>



        // function startLonger(){
        //     var div = document.getElementById('mydiv');
        //     var width = div.clientWidth;

        //     if(width < 400){
        //         width += 38;
        //         div.style.width = width + 'px';
        //         setTimeout(startLonger, 300);
        //     }else{
        //         div.style.width = '400px';
        //         setTimeout(startShorter, 300);
        //     }
        // }

        // function startShorter(){
        //     var div = document.getElementById('mydiv');
        //     var width = div.clientWidth;

        //     if(width > 20){
        //         width -= 38;
        //         div.style.width = width + 'px';
        //         div.style.left = (400 - width) + 'px';
        //         setTimeout(startShorter, 300);
        //     }else{
        //         div.style.width = '20px';
        //     }
        // }

        var MAX = 400;
        var EDGE = 20;
        var LENGTH = MAX - EDGE;
        var INTERVAL = 300;
        var PERIOD = 3000;
        var SPEED = Math.floor(LENGTH / (PERIOD/INTERVAL));

        function startLonger1(){
            var div = document.getElementById('mydiv');
            var width = div.clientWidth;

            if(width < MAX){
                width += SPEED;
                div.style.width = width + 'px';
                setTimeout(startLonger1, INTERVAL);
            }else{
                div.style.width = MAX + 'px';
                setTimeout(startShorter1, INTERVAL);
            }
        }

        function startShorter1(){
            var div = document.getElementById('mydiv');
            var width = div.clientWidth;

            if(width > EDGE){
                width -= SPEED;
                div.style.width = width + 'px';
                div.style.left = (MAX - width) + 'px';
                setTimeout(startShorter1, INTERVAL);
            }else{
                div.style.width = EDGE + 'px';
                startLonger2();
            }
        }

        function startLonger2(){
            var div = document.getElementById('mydiv');
            var height = div.clientHeight;

            if(height < MAX){
                height += SPEED;
                div.style.height = height + 'px';
                setTimeout(startLonger2, INTERVAL);
            }else{
                div.style.height = MAX + 'px';
                setTimeout(startShorter2, INTERVAL);
            }
        }

        function startShorter2(){
            var div = document.getElementById('mydiv');
            var height= div.clientHeight;

            if(height > EDGE){
                height -= SPEED;
                div.style.height = height + 'px';
                div.style.top = (MAX - height) + 'px';
                setTimeout(startShorter2, INTERVAL);
            }else{
                div.style.height = EDGE + 'px';
                startLonger3();
            }
        }


        // 第三步和第四步方向有问题。
        function startLonger3(){
            var div = document.getElementById('mydiv');
            var width = div.clientWidth;

            if(width < MAX){
                width += SPEED;
                div.style.width = width + 'px';
                setTimeout(startLonger3, INTERVAL);
            }else{
                div.style.width = MAX + 'px';
                setTimeout(startShorter3, INTERVAL);
            }
        }

        function startShorter3(){
            var div = document.getElementById('mydiv');
            var width = div.clientWidth;

            if(width > EDGE){
                width -= SPEED;
                div.style.width = width + 'px';
                div.style.right = (MAX - width) + 'px';
                setTimeout(startShorter3, INTERVAL);
            }else{
                div.style.width = EDGE + 'px';
                startShorter4();
            }
        }

        function startLonger4(){
            var div = document.getElementById('mydiv');
            var height = div.clientHeight;

            if(height < MAX){
                height += SPEED;
                div.style.height = height + 'px';
                setTimeout(startLonger4, INTERVAL);
            }else{
                div.style.height = MAX + 'px';
                setTimeout(startShorter4, INTERVAL);
            }
        }

        function startShorter4(){
            var div = document.getElementById('mydiv');
            var height= div.clientHeight;

            if(height > EDGE){
                height -= SPEED;
                div.style.height = height + 'px';
                div.style.bottom = (MAX - height) + 'px';
                setTimeout(startShorter4, INTERVAL);
            }else{
                div.style.height = EDGE + 'px';
                startLonger1();
            }
        }

        startLonger1();

    </script>

</body>
</html>
